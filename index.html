<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoSip - Sustainable Hydration Revolution</title>
    <link rel="icon" type="image/png" href="https://github.com/IchigoSolos69/EcoSip/blob/75bd8550becff437428136e981733d35cf7670d9/public/logo.png?raw=true">
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <div class="logo-icon">
                    <img src="https://github.com/IchigoSolos69/EcoSip/blob/75bd8550becff437428136e981733d35cf7670d9/public/logo.png?raw=true" alt="EcoSip Logo" width="40" height="40">
                </div>
                <span class="logo-text">EcoSip</span>
                <div class="logo-glow"></div>
            </div>
            <ul class="nav-menu">
                <li><a href="#home" class="nav-link">Home</a></li>
                <li><a href="#about" class="nav-link">About</a></li>
                <li><a href="#products" class="nav-link">Products</a></li>
                <li><a href="#testimonials" class="nav-link">Reviews</a></li>
                <li><a href="#gallery" class="nav-link">Gallery</a></li>
                <li><a href="#contact" class="nav-link">Contact</a></li>
            </ul>
            <div class="mobile-menu-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="hero-container">
            <div class="hero-content">
                <h1 class="hero-title">
                    POV: You Just 
                    Discovered The Bottle That's Saving
                    <span class="gradient-text">The World</span> 
                </h1>
                <p class="hero-subtitle">
                    Revolutionary eco-friendly water bottles that don't just hold water—they protect our planet
                </p>
            </div>
            <div class="hero-visual">
                <div id="stage" class="three-stage" aria-label="EcoSip 3D bottle"></div>
                <div class="floating-particles">
                    <div class="particle particle-1"></div>
                    <div class="particle particle-2"></div>
                    <div class="particle particle-3"></div>
                    <div class="particle particle-4"></div>
                    <div class="particle particle-5"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="about">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">About <span class="gradient-text">EcoSip</span></h2>
                <div class="title-underline"></div>
            </div>
            
            <div class="about-content">
                <div class="about-text">
                    <div class="about-intro">
                        <h3 class="about-subtitle">Revolutionizing Hydration, One Sip at a Time</h3>
                        <p class="about-description">
                            EcoSip represents the next generation of sustainable hydration solutions. Born from a passion for environmental conservation and innovative design, we've created water bottles that seamlessly blend cutting-edge technology with eco-conscious materials.
                        </p>
                    </div>

                    <div class="mission-grid">
                        <div class="mission-card">
                            <div class="card-icon">
                                <div class="icon-eco"></div>
                            </div>
                            <h4 class="card-title">100% Sustainable</h4>
                            <p class="card-description">
                                Crafted from recycled ocean plastic and biodegradable materials, every EcoSip bottle removes waste from our oceans while providing premium hydration.
                            </p>
                        </div>

                        <div class="mission-card">
                            <div class="card-icon">
                                <div class="icon-innovation"></div>
                            </div>
                            <h4 class="card-title">Smart Technology</h4>
                            <p class="card-description">
                                Integrated temperature control and hydration tracking technology ensures optimal water temperature and helps you maintain healthy hydration habits.
                            </p>
                        </div>

                        <div class="mission-card">
                            <div class="card-icon">
                                <div class="icon-impact"></div>
                            </div>
                            <h4 class="card-title">Global Impact</h4>
                            <p class="card-description">
                                Every purchase plants a tree and funds ocean cleanup initiatives. Join thousands of eco-warriors making a real difference for our planet's future.
                            </p>
                        </div>
                    </div>

                    <div class="stats-section">
                        <div class="stat-item">
                            <span class="stat-number">50,000+</span>
                            <span class="stat-label">Bottles Sold</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">25 Tons</span>
                            <span class="stat-label">Ocean Plastic Recycled</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">10,000</span>
                            <span class="stat-label">Trees Planted</span>
                        </div>
                    </div>
                </div>

                <div class="about-visual">
                    <div class="eco-visualization">
                        <div class="eco-circle main-circle">
                            <div class="circle-content">
                                <span class="circle-text">EcoSip</span>
                                <span class="circle-subtext">Impact</span>
                            </div>
                        </div>
                        <div class="eco-circle orbit-1">
                            <span class="orbit-text">Ocean Cleanup</span>
                        </div>
                        <div class="eco-circle orbit-2">
                            <span class="orbit-text">Tree Planting</span>
                        </div>
                        <div class="eco-circle orbit-3">
                            <span class="orbit-text">Carbon Neutral</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Product Showcase Section -->
    <section id="products" class="products">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Product <span class="gradient-text">Showcase</span></h2>
                <div class="title-underline"></div>
            </div>
            
            <div class="product-grid">
                <div class="product-card featured">
                    <div class="product-image">
                        <div class="product-glow"></div>
                        <div class="product-shape eco-classic"></div>
                        <div class="product-badge">Best Seller</div>
                    </div>
                    <div class="product-info">
                        <h3 class="product-name">EcoSip Classic</h3>
                        <p class="product-description">Our flagship 750ml bottle with smart temperature control and hydration tracking.</p>
                        <div class="product-features">
                            <span class="feature-tag">Temperature Control</span>
                            <span class="feature-tag">Hydration Tracking</span>
                            <span class="feature-tag">Ocean Plastic</span>
                        </div>
                        <div class="product-price">
                            <span class="price">$49.99</span>
                            <button class="btn btn-primary">Add to Cart</button>
                        </div>
                    </div>
                </div>

                <div class="product-card">
                    <div class="product-image">
                        <div class="product-glow"></div>
                        <div class="product-shape eco-sport"></div>
                        <div class="product-badge">New</div>
                    </div>
                    <div class="product-info">
                        <h3 class="product-name">EcoSip Sport</h3>
                        <p class="product-description">Lightweight 500ml bottle designed for active lifestyles and outdoor adventures.</p>
                        <div class="product-features">
                            <span class="feature-tag">Lightweight</span>
                            <span class="feature-tag">Grip Technology</span>
                            <span class="feature-tag">Quick Access</span>
                        </div>
                        <div class="product-price">
                            <span class="price">$39.99</span>
                            <button class="btn btn-secondary">Add to Cart</button>
                        </div>
                    </div>
                </div>

                <div class="product-card">
                    <div class="product-image">
                        <div class="product-glow"></div>
                        <div class="product-shape eco-premium"></div>
                        <div class="product-badge">Premium</div>
                    </div>
                    <div class="product-info">
                        <h3 class="product-name">EcoSip Premium</h3>
                        <p class="product-description">Luxury 1L bottle with advanced filtration and premium materials.</p>
                        <div class="product-features">
                            <span class="feature-tag">Advanced Filtration</span>
                            <span class="feature-tag">Premium Materials</span>
                            <span class="feature-tag">Lifetime Warranty</span>
                        </div>
                        <div class="product-price">
                            <span class="price">$79.99</span>
                            <button class="btn btn-secondary">Add to Cart</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="product-highlights">
                <div class="highlight-item">
                    <div class="highlight-icon">
                        <div class="icon-temperature"></div>
                    </div>
                    <h4>Smart Temperature Control</h4>
                    <p>Maintains optimal temperature for up to 24 hours</p>
                </div>
                <div class="highlight-item">
                    <div class="highlight-icon">
                        <div class="icon-tracking"></div>
                    </div>
                    <h4>Hydration Tracking</h4>
                    <p>Sync with your phone to track daily water intake</p>
                </div>
                <div class="highlight-item">
                    <div class="highlight-icon">
                        <div class="icon-eco-friendly"></div>
                    </div>
                    <h4>100% Eco-Friendly</h4>
                    <p>Made from recycled ocean plastic and biodegradable materials</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Testimonials Section -->
    <section id="testimonials" class="testimonials">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Customer <span class="gradient-text">Reviews</span></h2>
                <div class="title-underline"></div>
            </div>
            
            <div class="testimonials-grid">
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        <div class="stars">★★★★★</div>
                        <p class="testimonial-text">"EcoSip has completely changed my hydration habits. The temperature control is incredible, and I love knowing I'm helping the environment with every sip!"</p>
                        <div class="testimonial-author">
                            <div class="author-avatar">
                                <div class="avatar-placeholder">SM</div>
                            </div>
                            <div class="author-info">
                                <h4 class="author-name">Sarah Mitchell</h4>
                                <span class="author-title">Fitness Trainer</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="testimonial-card featured">
                    <div class="testimonial-content">
                        <div class="stars">★★★★★</div>
                        <p class="testimonial-text">"As an environmental scientist, I'm extremely picky about eco-friendly products. EcoSip exceeds all expectations - it's both sustainable and beautifully designed."</p>
                        <div class="testimonial-author">
                            <div class="author-avatar">
                                <div class="avatar-placeholder">DJ</div>
                            </div>
                            <div class="author-info">
                                <h4 class="author-name">Dr. James Chen</h4>
                                <span class="author-title">Environmental Scientist</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="testimonial-card">
                    <div class="testimonial-content">
                        <div class="stars">★★★★★</div>
                        <p class="testimonial-text">"The hydration tracking feature is a game-changer! I've never been so consistent with my water intake. Plus, the bottle looks amazing everywhere I go."</p>
                        <div class="testimonial-author">
                            <div class="author-avatar">
                                <div class="avatar-placeholder">AL</div>
                            </div>
                            <div class="author-info">
                                <h4 class="author-name">Alex Rodriguez</h4>
                                <span class="author-title">Digital Nomad</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="testimonial-card">
                    <div class="testimonial-content">
                        <div class="stars">★★★★★</div>
                        <p class="testimonial-text">"Perfect for my daily hikes! The grip technology is fantastic, and it keeps my water cold even in the hottest weather. Highly recommend!"</p>
                        <div class="testimonial-author">
                            <div class="author-avatar">
                                <div class="avatar-placeholder">EW</div>
                            </div>
                            <div class="author-info">
                                <h4 class="author-name">Emma Wilson</h4>
                                <span class="author-title">Outdoor Enthusiast</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="testimonials-stats">
                <div class="stat-item">
                    <span class="stat-number">4.9/5</span>
                    <span class="stat-label">Average Rating</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">98%</span>
                    <span class="stat-label">Would Recommend</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">15,000+</span>
                    <span class="stat-label">Happy Customers</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Gallery Section -->
    <section id="gallery" class="gallery">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Lifestyle <span class="gradient-text">Gallery</span></h2>
                <div class="title-underline"></div>
            </div>
            
            <div class="gallery-container">
                <div class="gallery-slider">
                    <div class="slide active">
                        <div class="slide-content">
                            <div class="slide-image lifestyle-1">
                                <div class="image-overlay">
                                    <h3>Adventure Awaits</h3>
                                    <p>EcoSip Sport on mountain trails</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide">
                        <div class="slide-content">
                            <div class="slide-image lifestyle-2">
                                <div class="image-overlay">
                                    <h3>Urban Lifestyle</h3>
                                    <p>EcoSip Classic in the city</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide">
                        <div class="slide-content">
                            <div class="slide-image lifestyle-3">
                                <div class="image-overlay">
                                    <h3>Beach Vibes</h3>
                                    <p>EcoSip Premium by the ocean</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide">
                        <div class="slide-content">
                            <div class="slide-image lifestyle-4">
                                <div class="image-overlay">
                                    <h3>Work & Wellness</h3>
                                    <p>EcoSip at the office</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="slider-controls">
                    <button class="slider-btn prev-btn">
                        <span class="btn-arrow">‹</span>
                    </button>
                    <div class="slider-dots">
                        <span class="dot active" data-slide="0"></span>
                        <span class="dot" data-slide="1"></span>
                        <span class="dot" data-slide="2"></span>
                        <span class="dot" data-slide="3"></span>
                    </div>
                    <button class="slider-btn next-btn">
                        <span class="btn-arrow">›</span>
                    </button>
                </div>
            </div>

            <div class="gallery-grid">
                <div class="gallery-item">
                    <div class="gallery-image gym"></div>
                    <div class="gallery-caption">Fitness & Wellness</div>
                </div>
                <div class="gallery-item">
                    <div class="gallery-image hiking"></div>
                    <div class="gallery-caption">Outdoor Adventures</div>
                </div>
                <div class="gallery-item">
                    <div class="gallery-image office"></div>
                    <div class="gallery-caption">Professional Life</div>
                </div>
                <div class="gallery-item">
                    <div class="gallery-image travel"></div>
                    <div class="gallery-caption">Travel Companion</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="contact">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Get in <span class="gradient-text">Touch</span></h2>
                <div class="title-underline"></div>
            </div>
            
            <div class="contact-content">
                <div class="contact-hero">
                    <div class="contact-intro">
                        <h3 class="contact-subtitle">Ready to Join the EcoSip Revolution?</h3>
                        <p class="contact-description">
                            Connect with us to learn more about sustainable hydration and how you can make a difference for our planet. 
                            We're here to answer your questions and help you start your eco-friendly journey.
                        </p>
                    </div>
                    
                    <div class="contact-visual">
                        <div class="contact-bottle-icon">
                            <img src="https://github.com/IchigoSolos69/EcoSip/blob/75bd8550becff437428136e981733d35cf7670d9/public/logo.png?raw=true" alt="EcoSip">
                            <div class="icon-glow"></div>
                        </div>
                    </div>
                </div>

                <div class="contact-grid">
                    <div class="contact-card email-card">
                        <div class="card-icon">
                            <div class="icon-wrapper">
                                <span class="icon">✉</span>
                            </div>
                        </div>
                        <div class="card-content">
                            <h4 class="card-title">Email Us</h4>
                            <p class="card-description">Get in touch for support, partnerships, or general inquiries</p>
                            <a href="mailto:hello@ecosip.com" class="contact-link">hello@ecosip.com</a>
                        </div>
                        <div class="card-hover-effect"></div>
                    </div>

                    <div class="contact-card phone-card">
                        <div class="card-icon">
                            <div class="icon-wrapper">
                                <span class="icon">📞</span>
                            </div>
                        </div>
                        <div class="card-content">
                            <h4 class="card-title">Call Us</h4>
                            <p class="card-description">Speak directly with our team for immediate assistance</p>
                            <a href="tel:+15551234567" class="contact-link">+1 (555) 123-4567</a>
                        </div>
                        <div class="card-hover-effect"></div>
                    </div>

                    <div class="contact-card location-card">
                        <div class="card-icon">
                            <div class="icon-wrapper">
                                <span class="icon">📍</span>
                            </div>
                        </div>
                        <div class="card-content">
                            <h4 class="card-title">Visit Us</h4>
                            <p class="card-description">Come see our sustainable operations in person</p>
                            <address class="contact-address">123 Eco Street<br>Green City, GC 12345</address>
                        </div>
                        <div class="card-hover-effect"></div>
                    </div>
                </div>

                <div class="social-connect">
                    <h4 class="social-title">Connect With Us</h4>
                    <p class="social-subtitle">Follow our journey and join the conversation</p>
                    <div class="social-links">
                        <a href="https://facebook.com/ecosip" target="_blank" class="social-link facebook">
                            <span class="social-icon">f</span>
                            <span class="social-label">Facebook</span>
                        </a>
                        <a href="https://instagram.com/ecosip" target="_blank" class="social-link instagram">
                            <span class="social-icon">📷</span>
                            <span class="social-label">Instagram</span>
                        </a>
                        <a href="https://twitter.com/ecosip" target="_blank" class="social-link twitter">
                            <span class="social-icon">🐦</span>
                            <span class="social-label">Twitter</span>
                        </a>
                        <a href="https://linkedin.com/company/ecosip" target="_blank" class="social-link linkedin">
                            <span class="social-icon">💼</span>
                            <span class="social-label">LinkedIn</span>
                        </a>
                    </div>
                </div>

                <div class="contact-cta">
                    <div class="cta-content">
                        <h4 class="cta-title">Have Questions?</h4>
                        <p class="cta-description">We're here to help you make the switch to sustainable hydration</p>
                        <div class="cta-buttons">
                            <a href="mailto:hello@ecosip.com" class="btn btn-primary">Get in Touch</a>
                            <a href="#products" class="btn btn-secondary">View Products</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <div class="footer-logo-container">
                        <img src="https://github.com/IchigoSolos69/EcoSip/blob/75bd8550becff437428136e981733d35cf7670d9/public/logo.png?raw=true" alt="EcoSip Logo" width="30" height="30" class="footer-logo-img">
                        <span class="logo-text">EcoSip</span>
                    </div>
                    <p class="footer-tagline">Sustainable hydration for a better tomorrow</p>
                </div>
                <div class="footer-links">
                    <a href="#" class="footer-link">Privacy Policy</a>
                    <a href="#" class="footer-link">Terms of Service</a>
                    <a href="#" class="footer-link">Contact Us</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 EcoSip. All rights reserved. Made with 💚 for the planet.</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script type="module">
    import * as THREE from "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js";
    import { OrbitControls } from "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/controls/OrbitControls.js";
    import gsap from "https://cdn.jsdelivr.net/npm/gsap@3.12.5/index.js";

    const stage = document.getElementById("stage");
    if (stage) {
      console.log("Stage found, initializing 3D bottle...");
      
      const isMobile = window.matchMedia('(max-width: 768px)').matches;
      const scene = new THREE.Scene();
      scene.background = new THREE.Color(0x000000);

      // Camera
      const camera = new THREE.PerspectiveCamera(45, stage.clientWidth / stage.clientHeight, 0.1, 100);
      camera.position.set(0, 0, 4);

      // Renderer
      const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
      renderer.setSize(stage.clientWidth, stage.clientHeight);
      renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
      renderer.toneMapping = THREE.ACESFilmicToneMapping;
      renderer.toneMappingExposure = 1.2;
      renderer.outputEncoding = THREE.sRGBEncoding;
      stage.appendChild(renderer.domElement);

      // Controls
      const controls = new OrbitControls(camera, renderer.domElement);
      controls.enableDamping = true;
      controls.enablePan = false;
      controls.enabled = !isMobile;

      // Lights
      scene.add(new THREE.AmbientLight(0x404040, 0.6));
      const directionalLight = new THREE.DirectionalLight(0xffffff, 1.0);
      directionalLight.position.set(5, 10, 5);
      scene.add(directionalLight);
      
      const neonGreen = new THREE.PointLight(0x00ff88, 1.5, 10);
      neonGreen.position.set(2, 2, 2);
      scene.add(neonGreen);
      
      const aquaBlue = new THREE.PointLight(0x00d4ff, 1.5, 10);
      aquaBlue.position.set(-2, -2, 2);
      scene.add(aquaBlue);

      // Create bottle group
      const bottleGroup = new THREE.Group();
      scene.add(bottleGroup);

      // Bottle body - simple cylinder for now
      const bottleGeometry = new THREE.CylinderGeometry(0.8, 0.9, 2.5, 32);
      const bottleMaterial = new THREE.MeshPhysicalMaterial({
        color: 0x00d4ff,
        metalness: 0.0,
        roughness: 0.1,
        transparent: true,
        opacity: 0.3,
        transmission: 0.9,
        thickness: 0.2,
        clearcoat: 1.0,
        clearcoatRoughness: 0.1
      });
      const bottle = new THREE.Mesh(bottleGeometry, bottleMaterial);
      bottleGroup.add(bottle);

      // Bottle neck
      const neckGeometry = new THREE.CylinderGeometry(0.3, 0.8, 0.6, 32);
      const neck = new THREE.Mesh(neckGeometry, bottleMaterial);
      neck.position.y = 1.55;
      bottleGroup.add(neck);

      // Cap with hinge
      const hinge = new THREE.Group();
      hinge.position.set(0, 1.8, 0.3);
      bottleGroup.add(hinge);

      const capGeometry = new THREE.CylinderGeometry(0.32, 0.32, 0.5, 32);
      const capMaterial = new THREE.MeshStandardMaterial({
        color: 0x00ff88,
        metalness: 0.8,
        roughness: 0.2
      });
      const cap = new THREE.Mesh(capGeometry, capMaterial);
      cap.position.set(0, 0, -0.3);
      hinge.add(cap);

      // Water inside
      const waterGeometry = new THREE.CylinderGeometry(0.75, 0.85, 2.2, 32);
      const waterMaterial = new THREE.MeshPhysicalMaterial({
        color: 0x00d4ff,
        transparent: true,
        opacity: 0.4,
        transmission: 0.8,
        thickness: 0.3,
        roughness: 0.0,
        metalness: 0.0
      });
      const water = new THREE.Mesh(waterGeometry, waterMaterial);
      water.position.y = 0.15;
      bottleGroup.add(water);

      // Logo ring
      const logoGeometry = new THREE.RingGeometry(0.4, 0.5, 32);
      const logoMaterial = new THREE.MeshBasicMaterial({
        color: 0x00ff88,
        transparent: true,
        opacity: 0.8,
        emissive: 0x00ff88,
        emissiveIntensity: 0.3
      });
      const logo = new THREE.Mesh(logoGeometry, logoMaterial);
      logo.position.set(0, 0.5, 0.85);
      logo.rotation.x = Math.PI / 2;
      bottleGroup.add(logo);

      // Neon wireframe
      const wireGeometry = new THREE.WireframeGeometry(bottleGeometry);
      const wireMaterial = new THREE.MeshBasicMaterial({
        color: 0x00ff88,
        transparent: true,
        opacity: 0.2
      });
      const wireframe = new THREE.Mesh(wireGeometry, wireMaterial);
      bottleGroup.add(wireframe);

      console.log("Bottle created, starting animation...");

      // Scroll-based cap opening
      const heroContent = document.querySelector('.hero-content');
      const textElements = heroContent ? heroContent.querySelectorAll('.hero-title, .hero-subtitle, .hero-buttons') : [];
      
      textElements.forEach((el, i) => {
        el.style.opacity = '0.6';
        el.style.transform = 'translateY(10px)';
        el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
      });

      const updateScroll = () => {
        const rect = stage.getBoundingClientRect();
        const viewportH = window.innerHeight;
        const visible = Math.max(0, Math.min(1, 1 - (rect.top + rect.height * 0.2) / (viewportH * 0.8)));
        
        // Open cap
        hinge.rotation.x = -visible * 1.2;
        
        // Reveal text
        textElements.forEach((el, idx) => {
          const progress = Math.max(0, Math.min(1, (visible - idx * 0.15) * 1.5));
          el.style.opacity = String(0.6 + 0.4 * progress);
          el.style.transform = `translateY(${10 * (1 - progress)}px)`;
        });
      };

      // Animation
      const animate = () => {
        requestAnimationFrame(animate);
        controls.update();
        updateScroll();
        renderer.render(scene, camera);
      };

      // Idle rotation
      gsap.to(bottleGroup.rotation, { y: Math.PI * 2, duration: 20, repeat: -1, ease: 'none' });
      gsap.to(bottleGroup.position, { y: '+=0.15', duration: 4, yoyo: true, repeat: -1, ease: 'sine.inOut' });

      // Resize
      const resize = () => {
        const w = stage.clientWidth;
        const h = stage.clientHeight;
        camera.aspect = w / h;
        camera.updateProjectionMatrix();
        renderer.setSize(w, h);
      };

      new ResizeObserver(resize).observe(stage);
      window.addEventListener('orientationchange', () => setTimeout(resize, 150));

      // Start rendering
      animate();
      console.log("3D bottle initialized successfully!");
    } else {
      console.error("Stage element not found!");
    }
    </script>
</body>
</html>
